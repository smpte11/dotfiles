#!/bin/bash

# Common Mac and Linux Bazzite stuff

## Command line tool
brew install nushell nvim starship zoxide fzf zellij lazydocker httpie carapace zk

## Lang toolchain
if ! command -v devpod &> /dev/null; then
    curl -L -o devpod "https://github.com/loft-sh/devpod/releases/latest/download/devpod-linux-amd64" && sudo install -c -m 0755 devpod /usr/local/bin && rm -f devpod
else 
    echo "Devpod already installed"
fi

brew install go pnpm fnm uv

if command -v fnm &> /dev/null; then
    echo "fnm present. Installing node"
    fnm install --lts
    fnm use default
fi

# tool dependent on npm
npm install -g @bitwarden/cli

# bazzite flatpacks
{{- if eq .chezmoi.hostname "bluefin-laptop" }}
flatpak -y --system --or-update install bitwarden
flatpak -y --system --or-update install vivaldi
{{- end }}
